"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8769],{18769:function(e,s,a){a.d(s,{ZP:function(){return X}});var i=a(97377),t=a(79614),l=a(27044),n=a(19882),r=a(42776),o=a(2473),d=a(92067),c=a(53476),u=a(2784),m=a(43147),x=a(83417),g=a(79045),h=a(60128),b=a(76903),p=a(8453),j=a(8359),y=a(13157),f=a(52322),w=e=>{let{albums:s}=e,{t:a}=(0,p.$G)("album-page"),t=(0,c.sJ)(x.v9)===g.ww.SFX,l=e=>t?(0,b.MY)(j._j.sfxPack)({albumID:e.albumId,albumName:e.nameForURL}):(0,b.MY)(j._j.musicAlbum)({albumID:e.albumId,albumName:e.nameForURL});return(0,f.jsxs)("div",{className:"mx-5 xl:mx-0","data-testid":"SimilarAlbums",children:[(0,f.jsx)("h2",{className:"mb-5",children:a(t?"similarSFXPacks":"similarAlbums")}),(0,f.jsx)("div",{className:"grid max-w-full grid-cols-3 gap-4 md:grid-cols-6 xl:grid-cols-2",children:s.map(e=>{let{albumId:s,thumbFilePath:a,albumName:n}=e;return(0,f.jsx)(x.BY,{to:l(e),additionalOnClickFn:()=>y.xT.track({name:"suggestion clicked",eventData:{media_type:t?"sfx":"song",suggestion_type:`Similar ${t?"packs":"albums"}`}}),"data-testid":"SimilarAlbums",children:(0,f.jsx)("div",{className:"h-25 w-25 max-w-full text-xs",children:a&&n&&(0,f.jsx)(i.K,{src:a,text:n,shouldShowTextInMobile:!0})})},s)})})]})},z=a(32706),v=a(36160),N=a.n(v),S=a(34739),k=a(58111),F=a(91172),_=a(93974),A=a(33836),C=a(49929),T=a(38914),I=a(44306),P=e=>{let{background:s,title:a,descriptionHTML:t,onClose:l,style:n}=e;return(0,f.jsxs)(z.animated.div,{style:n,className:"fixed z-20 flex h-screen w-screen flex-col items-center justify-center bg-black","data-testid":"AlbumModal",children:[s&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"absolute top-0 right-0 h-full w-full object-cover",children:(0,f.jsx)(i.Ee,{src:s,alt:"album-artist-background"})}),(0,f.jsx)("div",{className:"absolute h-full w-full bg-black opacity-80"})]}),(0,f.jsxs)("div",{className:"z-10 w-1/2 max-w-lg",children:[(0,f.jsx)("h2",{className:"mb-4 text-center text-3.5xl",children:a}),(0,f.jsx)("p",{className:"text-center text-base font-light leading-8",dangerouslySetInnerHTML:{__html:(0,I.jW)(t)}})]}),(0,f.jsx)("button",{type:"button",onClick:l,className:"absolute top-8 right-2 flex h-10 w-10 cursor-pointer items-center justify-center bg-transparent text-sm text-gray-100 hover:text-white sm:text-xl",children:(0,f.jsx)(C.G,{icon:T.NBC})})]})},E=e=>{let{album:s,songs:a,isSFX:l=!1}=e,{artistId:n,artistDisplayName:r,artistNameForUrl:o,albumId:d,albumName:h,imageFilePath:w,description:v,profileImage:C,isOriginal:T,coverFilePath:I,primaryArtists:E}=s??{},D=(0,c.sJ)(x.v9),B=d.toString(),L=(0,c.sJ)(x.D1),{onTogglePlayPause:U}=(0,x.Ez)(),[H,M]=(0,c.FV)(x.fT),Z=(0,c.sJ)(x.Gw),[R,V]=(0,u.useState)(!1),[Y,G]=(0,u.useState)(Z),[J,O]=(0,u.useState)(!1),X=(0,S.T_)(),{trackAudioEvent:W}=(0,u.useContext)(x.X5),$=(0,S.x5)(),{setSubscribeModalForSaveButton:q}=(0,k.c)();(0,u.useEffect)(()=>{let e=setTimeout(()=>G(Z),100);return()=>clearTimeout(e)},[Z,G]),(0,u.useEffect)(()=>{$&&(0,t.Js)([{id:B,type:g.W3.Album}]).then(e=>V(!N()(e.data)))},[$]);let K=a&&!!a.find(e=>{let{id:s}=e;return s===(null==H?void 0:H.id)}),Q=(0,z.useTransition)(J,{from:{opacity:0,scale:.95},enter:{opacity:1,scale:1},leave:{opacity:0,scale:.95}}),ee=async()=>{let e;(e=K&&H?H:a&&a[0])&&(H?U(e):M(e),A.userDataStore.updatePlayId(),W(e,"media played",{trigger:"button",nextPrevClicked:!1,listing_position:0,time_point:L,media_start:0===L}))},es=async()=>{if(!$&&w){let e=await (0,F.Lq)(w,"rgbArray","anonymous");q({thumbnailUrl:w,backgroundColor:e||_.Cg,assetType:g.tq.sfx});return}try{R?await (0,t.ju)(B,g.W3.Album):await (0,t.Vw)([{id:B,type:g.W3.Album}]),V(e=>!e)}catch({request:e}){401===e.status&&X({to:j._j.pricingBase})}},{t:ea}=(0,p.$G)("album-page"),ei=(e,s)=>l?(0,b.MY)(j._j.sfxArtist)({artistID:e,artistName:s}):(0,b.MY)(j._j.musicArtist)({artistID:e,artistName:s});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{id:"album-page__banner",children:I&&h&&w&&(0,f.jsx)(i.ef,{backgroundImageSrc:I,image:(0,f.jsx)(i.K,{onClickFn:()=>{O(!0),y.xT.track({name:"bio item clicked",eventData:{click_source:l?"pack page":"album page",button_name:"bio",media_id:d,song_id:d}})},text:h,src:w}),heading:(0,f.jsx)(i.pz,{variant:"heading",children:h}),text:(0,f.jsxs)(i.pz,{variant:"paragraph",children:[`${D===g.ww.SFX?"SFX Pack by ":ea("banner.albumBy")} `,n&&o&&(0,f.jsx)(x.BY,{to:ei(n,o),className:"inline text-accent",children:r}),null==E?void 0:E.map((e,s)=>{var a;return(0,f.jsxs)(u.Fragment,{children:[", ",e.id&&(0,f.jsx)(x.BY,{to:ei(e.id.toString(),encodeURIComponent(null===(a=e.name.toLowerCase())||void 0===a?void 0:a.replaceAll(" ","-"))),className:"inline text-accent",id:e.name,children:e.name})]},s)})]}),actions:(0,f.jsxs)(i.Mu,{children:[(0,f.jsx)(m.Z,{id:"album-page__banner__play-button",children:(0,f.jsx)("div",{children:(0,f.jsx)(i.zx,{isDisabled:!a,label:"play from banner",text:K&&Y?"Pause":"Play",size:"sm",onClickFn:K&&Z?()=>{H&&(U(H),W(H,"media paused",{trigger:"button",nextPrevClicked:!1,listing_position:0,media_start:0===L,time_point:L}))}:ee})})}),(0,f.jsx)(m.Z,{id:"album-page__banner__save-button",children:(0,f.jsx)("div",{children:(0,f.jsx)(i.zx,{text:ea(R?"banner.saved":"banner.save"),size:"sm",onClickFn:es,isHighlighted:R,variant:"outlined",textAndBorderHoverColor:"hover:text-accent hover:border-accent"})})}),(0,f.jsx)(i.x2,{onLinkCopy:()=>{},onShareMethodOpen:()=>{},shareURL:g.sk?"":window.location.href,placement:"right",copyButtonText:ea("banner.copy"),shouldHaveUniqId:!0,children:(0,f.jsx)(i.zx,{text:ea("banner.share"),size:"sm",variant:"outlined",onClickFn:()=>{y.xT.track({name:"share button clicked",eventData:{media_type:"album",title:h,artist:r}})},textAndBorderHoverColor:"hover:text-accent hover:border-accent"})})]}),isArtlistOriginal:T||!1,isImageVisibleOnMobile:!0})}),h&&v&&C&&Q((e,s)=>s&&(0,f.jsx)(P,{style:e,title:h,descriptionHTML:v,background:C,onClose:()=>O(!1)},"album-modal"))]})},D=a(31027),B=a(85801),L=a(48675),U=a(91340),H=a(35209);let M=()=>y.Tj.download("sfx"),Z=e=>{let{songs:s}=e,a=(0,S.x5)(),i=(0,S.im)(),{downloadAAC:t,downloadWAVE:l}=(0,S.VC)(!!a,D.Assets.AssetType.SFX),{isReady:n,isFeatureEnabled:r}=(0,d.Yo)(),{onTogglePlayPause:o,onWaveClick:m}=(0,x.Ez)(),{setSubscribeModalForDownloadButton:g,getSongFavoriteModalFunction:b,getSongCollectionModalFunction:p}=(0,k.c)(),j=(0,c.sJ)(x.fT),y=(0,c.sJ)(x.Gw),w=new U.k({click_source:"sfx pack",media_type:"sfx"}),z=e=>g({...e,isTrialUser:N}),v=(0,H.T)(i),{isTrial:N}=i,{shouldMarkAudioRow:F}=(0,x.$B)(),_=(0,c.Zl)(x._N),A=(0,c.Zl)(x.fT);return(0,u.useEffect)(()=>{!y&&s.length>0&&(_(s),A(s[0]))},[s.length]),(0,f.jsx)(x.Eu,{"data-testid":"SfxList",children:s.map((e,s)=>{let i=F(e),d={songId:e.id,songName:e.audioDetails.audioName,artistName:e.artistName||"",duration:e.duration,isNew:!!e.audioDetails.isNew,isOriginal:e.isOriginal,genreCategories:e.genreCategories},c=w.getRowEvents({song:d,listingPosition:s+1}),u=b(e.imageSrc),g=p(e.imageSrc);return(0,f.jsx)(L.Jg,{render:s=>{let{shouldShowSimilarSongs:d,setShouldShowSimilarSongs:b}=s;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(x.Y_,{rowBiEvents:c,song:e,audioDetails:e.audioDetails,isSongPlaying:y&&(null==j?void 0:j.id)===e.id,isHighlighted:i,updateCurrentProgressFn:s=>{m(e,s)},onCannotFavorite:u,onCannotAddToCollection:g,onCannotOpenFileTypeButtons:z,downloadAAC:t,downloadWAV:l,onDownloadSuccess:M,togglePlayerPlayPauseFn:()=>{o(e)},sfxViewFiletypesEligibility:v,isTrial:N||!1,isAuthenticated:a||!1,isRowEligibleForSimilarSounds:n&&r,shouldShowSimilarSongs:d,setShouldShowSimilarSongs:b}),(0,f.jsx)(x.Eu.Row,{className:"hidden lg:table-row",children:(0,f.jsxs)(x.Eu.Accordion,{isVisible:d,children:[(0,f.jsxs)(x.Eu.AccordionHeading,{children:[(0,f.jsxs)("h3",{children:["Similar sounds to ",e.audioDetails.audioName]}),(0,f.jsx)(B.Z,{"aria-label":"Close Similar Sounds",onClick:()=>{c.similarSongClosed(),b(!1)},children:(0,f.jsx)(C.G,{className:"text-gray-100 transition-all hover:text-white",icon:T.NBC})})]}),(0,f.jsx)(x.Eu,{children:(0,f.jsx)(h.FY,{biClickSource:"sfx pack",mainId:e.id,isTrial:!!N,downloadWAVE:l,downloadAAC:t,onDownloadSuccess:M,isAuthenticated:a||!1,sfxViewFiletypesEligibility:v})})]})})]})},id:e.id,"data-testid":"SfxList"},e.id)})})},R=e=>{let{hasBorder:s=!0,isWithinAccordion:a=!1}=e;return(0,f.jsxs)(x.Eu.Row,{"data-testid":"TempPlaceholderWhileUnderFeatureFlag",children:[(0,f.jsxs)(x.Eu.AlbumsAndArtists,{hasIndent:a,hasBorder:s,children:[(0,f.jsx)(i.u3,{className:"h-4 w-4 shrink-0"}),(0,f.jsx)(l.Z.Placeholder,{})]}),(0,f.jsx)(x.Eu.VersionsAndGenres,{hasBorder:s,children:(0,f.jsx)(n.Z.Placeholder,{})}),(0,f.jsxs)(x.Eu.DataAndActions,{hasBorder:s,children:[(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)("div",{className:"pointer-events-none hidden w-4 justify-center opacity-0 sm:flex",children:(0,f.jsx)(r.Z,{})}),(0,f.jsx)("div",{className:"pointer-events-none opacity-0",children:(0,f.jsx)(o.Z,{})})]}),(0,f.jsx)("div",{className:"flex w-24 justify-center",children:(0,f.jsx)(i.u3,{className:"h-5 w-10"})}),(0,f.jsx)("div",{className:"hidden grow xl:block",children:(0,f.jsx)(x.HT.Placeholder,{})}),(0,f.jsx)(i.u3,{className:"h-5 w-30"})]})]})};var V=a(30195);a(41938);let Y=V.z.object({id:V.z.coerce.string(),name:V.z.string()}),G=V.z.object({albumId:V.z.number().nullable(),albumName:V.z.string().nullable(),nameForURL:V.z.string().nullable(),thumbFilePath:V.z.string().nullable()}),J=V.z.object({albumId:V.z.string(),albumImageFilePath:V.z.string(),albumName:V.z.string(),albumNameForURL:V.z.string(),artistId:V.z.string(),artistName:V.z.string(),assetTypeId:V.z.number().nullish(),categories:t.HH.nullish(),explicit:V.z.boolean().nullish(),featuredArtists:V.z.preprocess(e=>{if(e)try{return JSON.parse(e)}catch(e){return[]}return e},V.z.array(Y).nullish()),genreCategories:t.HH.nullish(),lyrics:V.z.string().nullish(),productType:V.z.number().nullish(),durationTime:V.z.number(),isNew:V.z.boolean(),isInFavorites:V.z.boolean().nullish(),isInDownloadHistory:V.z.boolean().nullish(),nameForURL:V.z.string(),sitePlayableFilePath:V.z.string(),songId:V.z.string(),songName:V.z.string(),waveSurferFilePath:V.z.string()}),O=V.z.array(J);V.z.object({albumId:V.z.number(),albumName:V.z.string().nullable(),artistDisplayName:V.z.string().nullable(),artistId:V.z.string().nullable(),artistNameForUrl:V.z.string().nullable(),coverFilePath:V.z.string().nullable(),description:V.z.string().nullable(),imageFilePath:V.z.string().nullable(),isOriginal:V.z.boolean().nullable(),nameForURL:V.z.string().nullable(),profileImage:V.z.string().nullable(),featuredArtists:V.z.array(Y).nullable(),primaryArtists:V.z.array(Y).nullable(),songs:V.z.preprocess(e=>V.z.array(V.z.any()).parse(e).filter(e=>J.safeParse(e).success),O),similarAlbums:V.z.array(G).nullable().default([])});var X=e=>{let{album:s,isSFX:a=!1}=e,i=(0,c.Zl)(x.v9);(0,u.useEffect)(()=>i(a?g.ww.SFX:g.ww.MUSIC),[]);let l=(0,u.useMemo)(()=>s.songs?(0,t.V$)(s.songs,{getGenreCategories:e=>e.genreCategories||e.categories||[],getAssetTypeId:e=>e.productType?e.productType:a?2:1}):[],[s.albumId]),{enrichedAudioList:n}=(0,h.U0)({audioList:l,assetType:a?g.tq.sfx:g.tq.music}),{isReady:r,isFeatureEnabled:o}=(0,d.qV)();return(0,f.jsx)(x.hg,{clickSource:a?"sfx pack":"album page","data-testid":"AlbumPage",children:(0,f.jsxs)("div",{className:"flex flex-col pt-12.5 md:pt-0",children:[(0,f.jsx)(x.hg,{clickSource:a?"sfx pack main button":"album page main button",children:(0,f.jsx)(E,{isSFX:a,album:s,songs:l})}),(0,f.jsxs)(x.sM,{children:[(0,f.jsx)(m.Z,{id:"album-page__similar-albums",children:(0,f.jsx)("div",{className:"order-1 mt-9 shrink-0 xl:order-none xl:mr-6 xl:mt-6",children:s.similarAlbums&&(0,f.jsx)(w,{albums:s.similarAlbums})})}),(0,f.jsx)(m.Z,{id:"album-page__audio-list",children:n&&(0,f.jsxs)("div",{className:"grow pl-0 xl:pl-12.5",children:[!r&&(0,f.jsx)(x.Eu,{children:[,,,,,].fill(0).map((e,s)=>(0,f.jsx)(R,{},`placeholder_${s}`))}),r&&(0,f.jsx)(f.Fragment,{children:o&&a?(0,f.jsx)(Z,{songs:n}):(0,f.jsx)(x.Nf,{isSFX:a,audioList:n,shouldUseGenreAsFreeSearch:a})})]})})]})]})})}}}]);